<!DOCTYPE html><html class="default no-js"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>DbLocalContext | @coaty/core - v2.4.0</title><meta name="description" content="Documentation for @coaty/core - v2.4.0"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script async src="../assets/search.js" id="search-script"></script></head><body><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base=".."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">@coaty/core - v2.4.0</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><ul class="tsd-breadcrumb"><li><a href="../index.html">@coaty/core - v2.4.0</a></li><li><a href="../modules/db.html">db</a></li><li><a href="db.DbLocalContext.html">DbLocalContext</a></li></ul><h1>Class DbLocalContext</h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><section class="tsd-panel tsd-comment"><div class="tsd-comment tsd-typography"><div class="lead">
<p>A local database context persists data in a local database file without using
a database server. It is usually adequate for storing small amounts of data
in the local file system of a device or service. SQLite is a typical example of
such a database. Typically, a local database context is used to persist
application or service settings. For example, a local database context can be
used in a Node.js environment as well as in a Cordova app (utilizing specific
built-in SQLite database adapters).</p>
</div><div><p>Besides SQL operations and transactions, a local database context supports
local storage of pairs of keys and values. Keys are strings and values are
any JSON objects. Values can be retrieved when a key is known or by mapping
through all key value pairs.</p>
<p>The local database context features a promise-based interface for
asynchronous data flow control. A local database context is a light-weight object
that can be used to perform a single operation or multiple operations
in sequence. A local database context object can be short-lived but you
can also use it for the lifetime of your Coaty container by storing it as an
instance member in a controller.</p>
<p>To invoke multiple asynchronous operations in sequence, it is best practice to
use composing promises and promise chaining. Avoid the common bad practice
pattern of nesting promises as if they were callbacks.</p>
<p>Note that you can reuse a local database context object even if an operation
performed on it fails or throws an error.</p>
<p>If you invoke an operation on a local database context that is not supported by
the associated database adapter, the returned promise is rejected with an
&quot;operation not supported&quot; error.</p>
</div></div></section><section class="tsd-panel tsd-hierarchy"><h3>Hierarchy</h3><ul class="tsd-hierarchy"><li><span class="target">DbLocalContext</span></li></ul></section><section class="tsd-panel"><h3>Implements</h3><ul class="tsd-hierarchy"><li><a href="../interfaces/db.IDbSqlOperations.html" class="tsd-signature-type" data-tsd-kind="Interface">IDbSqlOperations</a></li><li><a href="../interfaces/db.IDbTransaction.html" class="tsd-signature-type" data-tsd-kind="Interface">IDbTransaction</a></li><li><a href="../interfaces/db.IDbLocalStore.html" class="tsd-signature-type" data-tsd-kind="Interface">IDbLocalStore</a></li></ul></section><section class="tsd-panel-group tsd-index-group"><h2>Index</h2><section class="tsd-panel tsd-index-panel"><div class="tsd-index-content"><section class="tsd-index-section "><h3>Constructors</h3><ul class="tsd-index-list"><li class="tsd-kind-constructor tsd-parent-kind-class"><a href="db.DbLocalContext.html#constructor" class="tsd-kind-icon">constructor</a></li></ul></section><section class="tsd-index-section tsd-is-private-protected"><h3>Properties</h3><ul class="tsd-index-list"><li class="tsd-kind-property tsd-parent-kind-class tsd-is-protected"><a href="db.DbLocalContext.html#_adapter" class="tsd-kind-icon">_adapter</a></li></ul></section><section class="tsd-index-section "><h3>Accessors</h3><ul class="tsd-index-list"><li class="tsd-kind-get-signature tsd-parent-kind-class"><a href="db.DbLocalContext.html#adapter" class="tsd-kind-icon">adapter</a></li></ul></section><section class="tsd-index-section "><h3>Methods</h3><ul class="tsd-index-list"><li class="tsd-kind-method tsd-parent-kind-class"><a href="db.DbLocalContext.html#addStore" class="tsd-kind-icon">add<wbr/>Store</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="db.DbLocalContext.html#callExtension" class="tsd-kind-icon">call<wbr/>Extension</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="db.DbLocalContext.html#clearValues" class="tsd-kind-icon">clear<wbr/>Values</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="db.DbLocalContext.html#close" class="tsd-kind-icon">close</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="db.DbLocalContext.html#deleteValue" class="tsd-kind-icon">delete<wbr/>Value</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="db.DbLocalContext.html#getValue" class="tsd-kind-icon">get<wbr/>Value</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="db.DbLocalContext.html#getValues" class="tsd-kind-icon">get<wbr/>Values</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="db.DbLocalContext.html#iquery" class="tsd-kind-icon">iquery</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="db.DbLocalContext.html#query" class="tsd-kind-icon">query</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="db.DbLocalContext.html#removeStore" class="tsd-kind-icon">remove<wbr/>Store</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="db.DbLocalContext.html#setValue" class="tsd-kind-icon">set<wbr/>Value</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="db.DbLocalContext.html#transaction" class="tsd-kind-icon">transaction</a></li></ul></section></div></section></section><section class="tsd-panel-group tsd-member-group "><h2>Constructors</h2><section class="tsd-panel tsd-member tsd-kind-constructor tsd-parent-kind-class"><a name="constructor" class="tsd-anchor"></a><h3>constructor</h3><ul class="tsd-signatures tsd-kind-constructor tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">new <wbr/>Db<wbr/>Local<wbr/>Context<span class="tsd-signature-symbol">(</span>connectionInfo<span class="tsd-signature-symbol">: </span><a href="../interfaces/core.DbConnectionInfo.html" class="tsd-signature-type" data-tsd-kind="Interface">DbConnectionInfo</a>, adapterType<span class="tsd-signature-symbol">?: </span><a href="../modules/db.html#IDbAdapterConstructor" class="tsd-signature-type" data-tsd-kind="Type alias">IDbAdapterConstructor</a><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><a href="db.DbLocalContext.html" class="tsd-signature-type" data-tsd-kind="Class">DbLocalContext</a></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/coatyio/coaty-js/blob/56d06e4/src/db/db-local-context.ts#L61">src/db/db-local-context.ts:61</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Create a new DbLocalContext for the given connection info.</p>
</div><div><p>You can optionally register the adapter constructor function to be used
by the given connection info.</p>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>connectionInfo: <a href="../interfaces/core.DbConnectionInfo.html" class="tsd-signature-type" data-tsd-kind="Interface">DbConnectionInfo</a></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>the connection information</p>
</div></div></li><li><h5><span class="tsd-flag ts-flagOptional">Optional</span> adapterType: <a href="../modules/db.html#IDbAdapterConstructor" class="tsd-signature-type" data-tsd-kind="Type alias">IDbAdapterConstructor</a></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>the adapter constructor function to be used (optional)</p>
</div></div></li></ul><h4 class="tsd-returns-title">Returns <a href="db.DbLocalContext.html" class="tsd-signature-type" data-tsd-kind="Class">DbLocalContext</a></h4></li></ul></section></section><section class="tsd-panel-group tsd-member-group tsd-is-private-protected"><h2>Properties</h2><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-class tsd-is-protected"><a name="_adapter" class="tsd-anchor"></a><h3><span class="tsd-flag ts-flagProtected">Protected</span> _adapter</h3><div class="tsd-signature tsd-kind-icon">_adapter<span class="tsd-signature-symbol">:</span> <a href="../interfaces/db.IDbAdapter.html" class="tsd-signature-type" data-tsd-kind="Interface">IDbAdapter</a><span class="tsd-signature-symbol"> &amp; </span><a href="../interfaces/db.IDbAdapterExtension.html" class="tsd-signature-type" data-tsd-kind="Interface">IDbAdapterExtension</a></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/coatyio/coaty-js/blob/56d06e4/src/db/db-local-context.ts#L50">src/db/db-local-context.ts:50</a></li></ul></aside></section></section><section class="tsd-panel-group tsd-member-group "><h2>Accessors</h2><section class="tsd-panel tsd-member tsd-kind-get-signature tsd-parent-kind-class"><a name="adapter" class="tsd-anchor"></a><h3>adapter</h3><ul class="tsd-signatures tsd-kind-get-signature tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon"><span class="tsd-signature-symbol">get</span> adapter<span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><a href="../interfaces/db.IDbAdapter.html" class="tsd-signature-type" data-tsd-kind="Interface">IDbAdapter</a><span class="tsd-signature-symbol"> &amp; </span><a href="../interfaces/db.IDbAdapterExtension.html" class="tsd-signature-type" data-tsd-kind="Interface">IDbAdapterExtension</a></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/coatyio/coaty-js/blob/56d06e4/src/db/db-local-context.ts#L74">src/db/db-local-context.ts:74</a></li></ul></aside><div class="tsd-comment tsd-typography"><dl class="tsd-comment-tags"><dt>internal</dt><dd><p>For internal use only. Do not use in your application code.</p>
</dd></dl></div><h4 class="tsd-returns-title">Returns <a href="../interfaces/db.IDbAdapter.html" class="tsd-signature-type" data-tsd-kind="Interface">IDbAdapter</a><span class="tsd-signature-symbol"> &amp; </span><a href="../interfaces/db.IDbAdapterExtension.html" class="tsd-signature-type" data-tsd-kind="Interface">IDbAdapterExtension</a></h4></li></ul></section></section><section class="tsd-panel-group tsd-member-group "><h2>Methods</h2><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a name="addStore" class="tsd-anchor"></a><h3>add<wbr/>Store</h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">add<wbr/>Store<span class="tsd-signature-symbol">(</span>name<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><p>Implementation of <a href="../interfaces/db.IDbLocalStore.html">IDbLocalStore</a>.<a href="../interfaces/db.IDbLocalStore.html#addStore">addStore</a></p><ul><li>Defined in <a href="https://github.com/coatyio/coaty-js/blob/56d06e4/src/db/db-local-context.ts#L160">src/db/db-local-context.ts:160</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Add a new store with the given name if it doesn&#39;t exist.</p>
</div><div><p>Returns a promise that is fulfilled if the operation succeeded.
The promise is rejected if an error occurred.</p>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>name: <span class="tsd-signature-type">string</span></h5></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">&gt;</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a name="callExtension" class="tsd-anchor"></a><h3>call<wbr/>Extension</h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">call<wbr/>Extension<span class="tsd-signature-symbol">(</span>name<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">string</span>, <span class="tsd-signature-symbol">...</span>params<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/coatyio/coaty-js/blob/56d06e4/src/db/db-local-context.ts#L88">src/db/db-local-context.ts:88</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Invokes the extension method by the specified name.
Returns a rejected promise if the method invocation throws an error
or if the extension method of the given name is not defined.</p>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>name: <span class="tsd-signature-type">string</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>the name of the extension method</p>
</div></div></li><li><h5><span class="tsd-flag ts-flagRest">Rest</span> <span class="tsd-signature-symbol">...</span>params: <span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">[]</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>the arguments of the extension methods</p>
</div></div></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">&gt;</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a name="clearValues" class="tsd-anchor"></a><h3>clear<wbr/>Values</h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">clear<wbr/>Values<span class="tsd-signature-symbol">(</span>store<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><p>Implementation of <a href="../interfaces/db.IDbLocalStore.html">IDbLocalStore</a>.<a href="../interfaces/db.IDbLocalStore.html#clearValues">clearValues</a></p><ul><li>Defined in <a href="https://github.com/coatyio/coaty-js/blob/56d06e4/src/db/db-local-context.ts#L229">src/db/db-local-context.ts:229</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Deletes all key-value pairs in the default store or the
store specified.</p>
</div><div><p>Returns a promise that is fulfilled if the delete operation succeeded.
The promise is rejected if an error occurred.</p>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5><span class="tsd-flag ts-flagOptional">Optional</span> store: <span class="tsd-signature-type">string</span></h5></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">&gt;</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a name="close" class="tsd-anchor"></a><h3>close</h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">close<span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><p>Implementation of <a href="../interfaces/db.IDbLocalStore.html">IDbLocalStore</a>.<a href="../interfaces/db.IDbLocalStore.html#close">close</a></p><ul><li>Defined in <a href="https://github.com/coatyio/coaty-js/blob/56d06e4/src/db/db-local-context.ts#L242">src/db/db-local-context.ts:242</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Closes the local database.
By closing, any file locks on the database file are removed.
The database is reopened again when operations are invoked after
the database has been closed.</p>
</div><div><p>Returns a promise that is fulfilled if the close operation succeeded.
The promise is rejected if an error occurred.</p>
</div></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">&gt;</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a name="deleteValue" class="tsd-anchor"></a><h3>delete<wbr/>Value</h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">delete<wbr/>Value<span class="tsd-signature-symbol">(</span>key<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">string</span>, store<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><p>Implementation of <a href="../interfaces/db.IDbLocalStore.html">IDbLocalStore</a>.<a href="../interfaces/db.IDbLocalStore.html#deleteValue">deleteValue</a></p><ul><li>Defined in <a href="https://github.com/coatyio/coaty-js/blob/56d06e4/src/db/db-local-context.ts#L218">src/db/db-local-context.ts:218</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Deletes the key-value pair for the given key in the default store or the
store specified.</p>
</div><div><p>Returns a promise that is fulfilled if the delete operation succeeded.
The promise is rejected if an error occurred.</p>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>key: <span class="tsd-signature-type">string</span></h5></li><li><h5><span class="tsd-flag ts-flagOptional">Optional</span> store: <span class="tsd-signature-type">string</span></h5></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">&gt;</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a name="getValue" class="tsd-anchor"></a><h3>get<wbr/>Value</h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">get<wbr/>Value<span class="tsd-signature-symbol">(</span>key<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">string</span>, store<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><p>Implementation of <a href="../interfaces/db.IDbLocalStore.html">IDbLocalStore</a>.<a href="../interfaces/db.IDbLocalStore.html#getValue">getValue</a></p><ul><li>Defined in <a href="https://github.com/coatyio/coaty-js/blob/56d06e4/src/db/db-local-context.ts#L182">src/db/db-local-context.ts:182</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Gets the value for the given key in the default store or the
store specified.</p>
</div><div><p>Returns a promise that if fulfilled yields the value for the key.
If the given key doesn&#39;t exist, the promise yields <code>undefined</code>.
The promise is rejected if an error occurred.</p>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>key: <span class="tsd-signature-type">string</span></h5></li><li><h5><span class="tsd-flag ts-flagOptional">Optional</span> store: <span class="tsd-signature-type">string</span></h5></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">&gt;</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a name="getValues" class="tsd-anchor"></a><h3>get<wbr/>Values</h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">get<wbr/>Values<span class="tsd-signature-symbol">(</span>store<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><p>Implementation of <a href="../interfaces/db.IDbLocalStore.html">IDbLocalStore</a>.<a href="../interfaces/db.IDbLocalStore.html#getValues">getValues</a></p><ul><li>Defined in <a href="https://github.com/coatyio/coaty-js/blob/56d06e4/src/db/db-local-context.ts#L193">src/db/db-local-context.ts:193</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Gets an object with all key-value pairs in the default store or the
store specified.</p>
</div><div><p>Returns a promise that if fulfilled yields an object of key-value pairs.
The promise is rejected if an error occurred.</p>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5><span class="tsd-flag ts-flagOptional">Optional</span> store: <span class="tsd-signature-type">string</span></h5></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">&gt;</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a name="iquery" class="tsd-anchor"></a><h3>iquery</h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">iquery<span class="tsd-signature-symbol">(</span>sql<span class="tsd-signature-symbol">: </span><a href="../modules/db.html#SqlQueryBuilder" class="tsd-signature-type" data-tsd-kind="Type alias">SqlQueryBuilder</a>, queryOptions<span class="tsd-signature-symbol">?: </span><a href="../interfaces/db.SqlQueryOptions.html" class="tsd-signature-type" data-tsd-kind="Interface">SqlQueryOptions</a><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a href="../interfaces/db.IQueryIterator.html" class="tsd-signature-type" data-tsd-kind="Interface">IQueryIterator</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><p>Implementation of <a href="../interfaces/db.IDbSqlOperations.html">IDbSqlOperations</a>.<a href="../interfaces/db.IDbSqlOperations.html#iquery">iquery</a></p><ul><li>Defined in <a href="https://github.com/coatyio/coaty-js/blob/56d06e4/src/db/db-local-context.ts#L134">src/db/db-local-context.ts:134</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Execute an SQL query defined by the given query builder and
retrieve the results iteratively.</p>
</div><div><p>Use the predefined query builder functions SQL or RAW to formulate
your parameterized SQL query.</p>
<p>The result can be iterated one by one or in batches to avoid
memory overrun when the result contains a large number of rows.
Usually, this is implemented by using a cursor. The fetch size of the
cursor can be adjusted in the specified query options.</p>
<p>Returns a promise that if fulfilled yields an iterator for iterating
the resulting row data. The promise is rejected if an error occurred.</p>
<p>If your query yields a rather small result set, you should
consider using the <code>query</code> operation instead of this one.</p>
<p>Note that the <code>iquery</code> operation might not be supported by a
specific database adapter. In this case, the returned promise
yields an &quot;operation not supported&quot; error.</p>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>sql: <a href="../modules/db.html#SqlQueryBuilder" class="tsd-signature-type" data-tsd-kind="Type alias">SqlQueryBuilder</a></h5></li><li><h5><span class="tsd-flag ts-flagOptional">Optional</span> queryOptions: <a href="../interfaces/db.SqlQueryOptions.html" class="tsd-signature-type" data-tsd-kind="Interface">SqlQueryOptions</a></h5></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a href="../interfaces/db.IQueryIterator.html" class="tsd-signature-type" data-tsd-kind="Interface">IQueryIterator</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">&gt;</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a name="query" class="tsd-anchor"></a><h3>query</h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">query<span class="tsd-signature-symbol">(</span>sql<span class="tsd-signature-symbol">: </span><a href="../modules/db.html#SqlQueryBuilder" class="tsd-signature-type" data-tsd-kind="Type alias">SqlQueryBuilder</a><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a href="../interfaces/db.SqlQueryResultSet.html" class="tsd-signature-type" data-tsd-kind="Interface">SqlQueryResultSet</a><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><p>Implementation of <a href="../interfaces/db.IDbSqlOperations.html">IDbSqlOperations</a>.<a href="../interfaces/db.IDbSqlOperations.html#query">query</a></p><ul><li>Defined in <a href="https://github.com/coatyio/coaty-js/blob/56d06e4/src/db/db-local-context.ts#L108">src/db/db-local-context.ts:108</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Execute an SQL query defined by the given query builder and
retrieve the results as one set of row data.</p>
</div><div><p>Use the predefined query builder functions SQL or RAW to formulate
your query.</p>
<p>Returns a promise that if fulfilled yields all the query results as
one set of row data. The promise is rejected if the query yields an
error.</p>
<p>If your query potentially yields a large set of results, you should
consider using the <code>iquery</code> operation instead of this one.</p>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>sql: <a href="../modules/db.html#SqlQueryBuilder" class="tsd-signature-type" data-tsd-kind="Type alias">SqlQueryBuilder</a></h5></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a href="../interfaces/db.SqlQueryResultSet.html" class="tsd-signature-type" data-tsd-kind="Interface">SqlQueryResultSet</a><span class="tsd-signature-symbol">&gt;</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a name="removeStore" class="tsd-anchor"></a><h3>remove<wbr/>Store</h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">remove<wbr/>Store<span class="tsd-signature-symbol">(</span>name<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><p>Implementation of <a href="../interfaces/db.IDbLocalStore.html">IDbLocalStore</a>.<a href="../interfaces/db.IDbLocalStore.html#removeStore">removeStore</a></p><ul><li>Defined in <a href="https://github.com/coatyio/coaty-js/blob/56d06e4/src/db/db-local-context.ts#L170">src/db/db-local-context.ts:170</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Remove a store with the given name if it exists.</p>
</div><div><p>Returns a promise that is fulfilled if the operation succeeded.
The promise is rejected if an error occurred.</p>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>name: <span class="tsd-signature-type">string</span></h5></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">&gt;</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a name="setValue" class="tsd-anchor"></a><h3>set<wbr/>Value</h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">set<wbr/>Value<span class="tsd-signature-symbol">(</span>key<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">string</span>, value<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">any</span>, store<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><p>Implementation of <a href="../interfaces/db.IDbLocalStore.html">IDbLocalStore</a>.<a href="../interfaces/db.IDbLocalStore.html#setValue">setValue</a></p><ul><li>Defined in <a href="https://github.com/coatyio/coaty-js/blob/56d06e4/src/db/db-local-context.ts#L207">src/db/db-local-context.ts:207</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Sets the value for the given key in the default store or the
store specified.</p>
</div><div><p>You can pass in any JavaScript object that can be represented in JSON
format.</p>
<p>Returns a promise that is fulfilled if the set operation succeeded.
The promise is rejected if an error occurred.</p>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>key: <span class="tsd-signature-type">string</span></h5></li><li><h5>value: <span class="tsd-signature-type">any</span></h5></li><li><h5><span class="tsd-flag ts-flagOptional">Optional</span> store: <span class="tsd-signature-type">string</span></h5></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">&gt;</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a name="transaction" class="tsd-anchor"></a><h3>transaction</h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">transaction<span class="tsd-signature-symbol">(</span>action<span class="tsd-signature-symbol">: </span><span class="tsd-signature-symbol">(</span>transactionContext<span class="tsd-signature-symbol">: </span><a href="db.DbLocalContext.html" class="tsd-signature-type" data-tsd-kind="Class">DbLocalContext</a><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol"> =&gt; </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><p>Implementation of <a href="../interfaces/db.IDbTransaction.html">IDbTransaction</a>.<a href="../interfaces/db.IDbTransaction.html#transaction">transaction</a></p><ul><li>Defined in <a href="https://github.com/coatyio/coaty-js/blob/56d06e4/src/db/db-local-context.ts#L150">src/db/db-local-context.ts:150</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Execute the async operations in the given action callback inside a
database transaction block. The action callback must return a promise
that is fulfilled if all operations have executed without errors,
and that is rejected if any of the operations fail.</p>
</div><div><p>Returns a promise that if fulfilled signals that the transaction has
been committed. The promise is rejected if the transaction has been
rolled back.</p>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>action: <span class="tsd-signature-symbol">(</span>transactionContext<span class="tsd-signature-symbol">: </span><a href="db.DbLocalContext.html" class="tsd-signature-type" data-tsd-kind="Class">DbLocalContext</a><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol"> =&gt; </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">&gt;</span></h5><ul class="tsd-parameters"><li class="tsd-parameter-signature"><ul class="tsd-signatures tsd-kind-type-literal"><li class="tsd-signature tsd-kind-icon"><span class="tsd-signature-symbol">(</span>transactionContext<span class="tsd-signature-symbol">: </span><a href="db.DbLocalContext.html" class="tsd-signature-type" data-tsd-kind="Class">DbLocalContext</a><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>transactionContext: <a href="db.DbLocalContext.html" class="tsd-signature-type" data-tsd-kind="Class">DbLocalContext</a></h5></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">&gt;</span></h4></li></ul></li></ul></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">&gt;</span></h4></li></ul></section></section></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class=""><a href="../index.html">Modules</a></li><li class=" tsd-kind-module"><a href="../modules/core.html">core</a></li><li class="current tsd-kind-module"><a href="../modules/db.html">db</a></li><li class=" tsd-kind-module"><a href="../modules/db_adapter_in_memory.html">db/adapter-<wbr/>in-<wbr/>memory</a></li><li class=" tsd-kind-module"><a href="../modules/db_adapter_postgres.html">db/adapter-<wbr/>postgres</a></li><li class=" tsd-kind-module"><a href="../modules/db_adapter_sqlite_base.html">db/adapter-<wbr/>sqlite-<wbr/>base</a></li><li class=" tsd-kind-module"><a href="../modules/db_adapter_sqlite_cordova.html">db/adapter-<wbr/>sqlite-<wbr/>cordova</a></li><li class=" tsd-kind-module"><a href="../modules/db_adapter_sqlite_node.html">db/adapter-<wbr/>sqlite-<wbr/>node</a></li><li class=" tsd-kind-module"><a href="../modules/io_routing.html">io-<wbr/>routing</a></li><li class=" tsd-kind-module"><a href="../modules/runtime_angular.html">runtime-<wbr/>angular</a></li><li class=" tsd-kind-module"><a href="../modules/runtime_node.html">runtime-<wbr/>node</a></li><li class=" tsd-kind-module"><a href="../modules/sensor_things.html">sensor-<wbr/>things</a></li><li class=" tsd-kind-module"><a href="../modules/sensor_things_io.html">sensor-<wbr/>things/io</a></li></ul></nav><nav class="tsd-navigation secondary menu-sticky"><ul><li class="current tsd-kind-class tsd-parent-kind-module"><a href="db.DbLocalContext.html" class="tsd-kind-icon">Db<wbr/>Local<wbr/>Context</a><ul><li class="tsd-kind-constructor tsd-parent-kind-class"><a href="db.DbLocalContext.html#constructor" class="tsd-kind-icon">constructor</a></li><li class="tsd-kind-property tsd-parent-kind-class tsd-is-protected"><a href="db.DbLocalContext.html#_adapter" class="tsd-kind-icon">_adapter</a></li><li class="tsd-kind-get-signature tsd-parent-kind-class"><a href="db.DbLocalContext.html#adapter" class="tsd-kind-icon">adapter</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="db.DbLocalContext.html#addStore" class="tsd-kind-icon">add<wbr/>Store</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="db.DbLocalContext.html#callExtension" class="tsd-kind-icon">call<wbr/>Extension</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="db.DbLocalContext.html#clearValues" class="tsd-kind-icon">clear<wbr/>Values</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="db.DbLocalContext.html#close" class="tsd-kind-icon">close</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="db.DbLocalContext.html#deleteValue" class="tsd-kind-icon">delete<wbr/>Value</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="db.DbLocalContext.html#getValue" class="tsd-kind-icon">get<wbr/>Value</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="db.DbLocalContext.html#getValues" class="tsd-kind-icon">get<wbr/>Values</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="db.DbLocalContext.html#iquery" class="tsd-kind-icon">iquery</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="db.DbLocalContext.html#query" class="tsd-kind-icon">query</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="db.DbLocalContext.html#removeStore" class="tsd-kind-icon">remove<wbr/>Store</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="db.DbLocalContext.html#setValue" class="tsd-kind-icon">set<wbr/>Value</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="db.DbLocalContext.html#transaction" class="tsd-kind-icon">transaction</a></li></ul></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-variable"><span class="tsd-kind-icon">Variable</span></li><li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li><li class="tsd-kind-function tsd-has-type-parameter"><span class="tsd-kind-icon">Function with type parameter</span></li><li class="tsd-kind-type-alias"><span class="tsd-kind-icon">Type alias</span></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><span class="tsd-kind-icon">Type alias with type parameter</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li><li class="tsd-kind-class tsd-has-type-parameter"><span class="tsd-kind-icon">Class with type parameter</span></li><li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li><li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-interface"><span class="tsd-kind-icon">Interface</span></li><li class="tsd-kind-interface tsd-has-type-parameter"><span class="tsd-kind-icon">Interface with type parameter</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-enum"><span class="tsd-kind-icon">Enumeration</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-property tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected property</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="../assets/main.js"></script></body></html>